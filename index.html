<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pembayaran Berhasil</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        .popup-container {
            background-color: white;
            border-radius: 10px;
            width: 100%;
            max-width: 500px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            position: relative;
        }
        
        .header {
            background-color: #003366;
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .logo {
            max-width: 120px;
            margin-bottom: 15px;
        }
        
        .title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .subtitle {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .content {
            padding: 25px;
        }
        
        .success-icon {
            text-align: center;
            margin: 20px 0;
        }
        
        .success-icon svg {
            width: 80px;
            height: 80px;
        }
        
        .success-message {
            text-align: center;
            font-size: 20px;
            font-weight: bold;
            color: #2e7d32;
            margin: 15px 0;
        }
        
        .info-section {
            margin-bottom: 20px;
        }
        
        .info-title {
            font-size: 16px;
            font-weight: bold;
            color: #003366;
            margin-bottom: 10px;
            border-bottom: 1px solid #eaeaea;
            padding-bottom: 5px;
        }
        
        .info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .info-label {
            font-weight: 500;
            color: #555;
        }
        
        .info-value {
            font-weight: 600;
            color: #333;
        }
        
        .payment-info {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .payment-amount {
            font-size: 24px;
            font-weight: bold;
            color: #2e7d32;
            text-align: center;
            margin: 10px 0;
        }
        
        .payment-code {
            font-size: 18px;
            font-weight: bold;
            color: #003366;
            text-align: center;
            margin: 15px 0;
            letter-spacing: 1px;
        }
        
        .payment-status {
            background-color: #e8f5e9;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .status-label {
            font-size: 14px;
            color: #555;
            margin-bottom: 5px;
        }
        
        .status-value {
            font-size: 18px;
            font-weight: bold;
            color: #2e7d32;
        }
        
        .payment-date {
            text-align: center;
            margin: 15px 0;
            font-size: 14px;
            color: #555;
        }
        
        .success-note {
            background-color: #e8f5e9;
            border-left: 4px solid #2e7d32;
            padding: 15px;
            margin: 20px 0;
            font-size: 14px;
            color: #2e7d32;
        }
        
        .express-offer {
            background-color: #fff8e1;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            border: 2px dashed #ffc107;
        }
        
        .offer-title {
            font-size: 16px;
            font-weight: bold;
            color: #e65100;
            text-align: center;
            margin-bottom: 10px;
        }
        
        .offer-content {
            font-size: 14px;
            color: #5d4037;
            margin-bottom: 15px;
        }
        
        .offer-warning {
            background-color: #ffebee;
            border-left: 4px solid #f44336;
            padding: 10px;
            margin: 10px 0;
            font-size: 13px;
            color: #c62828;
        }
        
        .btn-container {
            display: flex;
            justify-content: center;
            margin-top: 25px;
            gap: 10px;
        }
        
        .btn {
            background-color: #003366;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .btn:hover {
            background-color: #002244;
        }
        
        .btn-success {
            background-color: #2e7d32;
        }
        
        .btn-success:hover {
            background-color: #1b5e20;
        }
        
        .btn-express {
            background-color: #e65100;
        }
        
        .btn-express:hover {
            background-color: #bf360c;
        }
        
        .footer {
            background-color: #f1f1f1;
            padding: 15px;
            text-align: center;
            font-size: 12px;
            color: #666;
        }
        
        .copyright {
            font-weight: 500;
        }
        
        /* NIK Form Styles */
        .nik-form {
            display: none;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            color: #555;
            margin-bottom: 8px;
        }
        
        .form-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #003366;
            box-shadow: 0 0 0 2px rgba(0, 51, 102, 0.2);
        }
        
        .error-message {
            color: #f44336;
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }
        
        /* Loading Spinner */
        .loading-container {
            display: none;
            text-align: center;
            padding: 40px 0;
        }
        
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top: 4px solid #003366;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-text {
            font-size: 16px;
            color: #555;
        }
        
        /* Express Payment Popup */
        .express-payment {
            display: none;
        }
        
        .timer-container {
            text-align: center;
            margin: 20px 0;
        }
        
        .timer-label {
            font-size: 14px;
            color: #555;
            margin-bottom: 5px;
        }
        
        .timer {
            font-size: 24px;
            font-weight: bold;
            color: #e63946;
            padding: 10px;
            border: 2px solid #e63946;
            border-radius: 5px;
            display: inline-block;
            min-width: 200px;
        }
        
        .warning {
            background-color: #fff8e1;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            font-size: 14px;
            color: #5d4037;
        }
        
        .access-denied {
            background-color: #ffebee;
            border-left: 4px solid #f44336;
            padding: 15px;
            margin: 20px 0;
            font-size: 14px;
            color: #c62828;
            display: none;
        }
        
        @media (max-width: 480px) {
            .popup-container {
                max-width: 100%;
            }
            
            .title {
                font-size: 16px;
            }
            
            .subtitle {
                font-size: 13px;
            }
            
            .content {
                padding: 20px 15px;
            }
            
            .payment-amount {
                font-size: 20px;
            }
            
            .payment-code {
                font-size: 16px;
            }
            
            .btn-container {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Main Success Popup -->
    <div class="popup-container" id="successPopup">
        <div class="header">
            <img src="https://z-cdn-media.chatglm.cn/files/12038e0f-115c-45aa-9d42-52d6ea82ffe6_Logo.png?auth_key=1790939066-c0ecc9049e204f12a6409fbc78ea90a8-0-f4eae3f3ae6679c5ee07784c0200fba2" alt="Logo Imigrasi" class="logo">
            <div class="title">PEMBAYARAN BERHASIL</div>
            <div class="subtitle">Paspor Baru Elektronik 10 Tahun</div>
        </div>
        
        <div class="content">
            <div class="success-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="#2e7d32" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                    <polyline points="22 4 12 14.01 9 11.01"></polyline>
                </svg>
            </div>
            
            <div class="success-message">Pembayaran Anda Telah Berhasil!</div>
            
            <div class="info-section">
                <div class="info-title">Data Pemohon</div>
                <div class="info-row">
                    <span class="info-label">Nama</span>
                    <span class="info-value">NATSIR BAHARI TAJUDIN</span>
                </div>
                <div class="info-row">
                    <span class="info-label">NIK</span>
                    <span class="info-value">3204142203870002</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Jenis Kelamin</span>
                    <span class="info-value">Laki-laki</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Alamat</span>
                    <span class="info-value">KP. LANGONSARI Gol.Darah</span>
                </div>
            </div>
            
            <div class="info-section">
                <div class="info-title">Informasi Kantor</div>
                <div class="info-row">
                    <span class="info-label">Kantor Imigrasi</span>
                    <span class="info-value">Kelas 1 TPI Bandung</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Alamat Kantor</span>
                    <span class="info-value">Jl. Surapati</span>
                </div>
            </div>
            
            <div class="info-section">
                <div class="info-title">Informasi Agen</div>
                <div class="info-row">
                    <span class="info-label">Nama Akun Agen</span>
                    <span class="info-value">Hj. Erick Sm SH</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Email Agen</span>
                    <span class="info-value">agency@bandung.com</span>
                </div>
            </div>
            
            <div class="info-section">
                <div class="info-title">Jadwal Kedatangan</div>
                <div class="info-row">
                    <span class="info-label">Tanggal</span>
                    <span class="info-value">Selasa, 18 November 2025</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Waktu</span>
                    <span class="info-value">10:30 - 11:00 WIB</span>
                </div>
            </div>
            
            <div class="payment-info">
                <div class="info-title">Informasi Pembayaran</div>
                <div class="info-row">
                    <span class="info-label">Jumlah Pembayaran</span>
                </div>
                <div class="payment-amount">Rp 953.500,00</div>
                <div class="info-row">
                    <span class="info-label">Kode Pembayaran</span>
                </div>
                <div class="payment-code">910266000000826566</div>
            </div>
            
            <div class="payment-status">
                <div class="status-label">Status Pembayaran</div>
                <div class="status-value">BERHASIL</div>
            </div>
            
            <div class="payment-date">
                <strong>Tanggal & Waktu Pembayaran:</strong> 17 November 2025, 14:35:22 WIB
            </div>
            
            <div class="express-offer">
                <div class="offer-title">PENAWARAN KHUSUS: LAYANAN PERCEPATAN</div>
                <div class="offer-content">
                    Dapatkan layanan percepatan pembuatan paspor Anda dengan keuntungan:
                    <ul style="margin-left: 20px; margin-top: 5px;">
                        <li>Selesai dalam 1 hari kerja</li>
                        <li>Prioritas pelayanan khusus</li>
                        <li>Proses cepat tanpa antri</li>
                    </ul>
                </div>
                <div class="offer-warning">
                    <strong>PERINGATAN:</strong> Karena data Anda dari luar kota Bandung, untuk layanan percepatan dalam sehari selesai wajib ditentukan sekarang. Tekan tombol "Layanan Percepatan" di bawah ini.
                </div>
            </div>
            
            <div class="success-note">
                <strong>Informasi:</strong> Pembayaran Anda telah berhasil diproses. Silakan datang ke Kantor Imigrasi sesuai jadwal yang telah ditentukan dengan membawa bukti pembayaran ini dan dokumen pendukung lainnya.
            </div>
            
            <div class="btn-container">
                <button class="btn btn-success" onclick="window.print()">Cetak Bukti</button>
                <button class="btn" onclick="window.close()">Tutup</button>
                <button class="btn btn-express" onclick="showNikForm()">Layanan Percepatan</button>
            </div>
        </div>
        
        <div class="footer">
            <div class="copyright">Hak Cipta © 2023 Direktorat Jenderal Imigrasi Republik Indonesia</div>
        </div>
    </div>
    
    <!-- NIK Form Popup -->
    <div class="popup-container nik-form" id="nikFormPopup">
        <div class="header">
            <img src="https://z-cdn-media.chatglm.cn/files/12038e0f-115c-45aa-9d42-52d6ea82ffe6_Logo.png?auth_key=1790939066-c0ecc9049e204f12a6409fbc78ea90a8-0-f4eae3f3ae6679c5ee07784c0200fba2" alt="Logo Imigrasi" class="logo">
            <div class="title">LAYANAN PERCEPATAN</div>
            <div class="subtitle">Masukkan NIK Pemohon</div>
        </div>
        
        <div class="content">
            <div class="info-section">
                <div class="info-title">Verifikasi Data Pemohon</div>
                <p style="font-size: 14px; color: #555; margin-bottom: 15px;">
                    Untuk melanjutkan layanan percepatan, silakan masukkan NIK pemohon untuk verifikasi data.
                </p>
                
                <div class="form-group">
                    <label class="form-label" for="nikInput">NIK Pemohon</label>
                    <input type="text" id="nikInput" class="form-input" placeholder="Masukkan NIK pemohon" maxlength="16">
                    <div class="error-message" id="nikError">NIK tidak valid atau tidak berhak mengakses layanan percepatan</div>
                </div>
                
                <div class="access-denied" id="accessDenied">
                    <strong>Akses Ditolak:</strong> Hanya pemohon dengan NIK tertentu yang dapat mengakses layanan percepatan. Silakan hubungi kantor imigrasi untuk informasi lebih lanjut.
                </div>
            </div>
            
            <div class="btn-container">
                <button class="btn" onclick="backToSuccess()">Kembali</button>
                <button class="btn btn-express" onclick="submitNik()">Lanjut</button>
            </div>
        </div>
        
        <div class="footer">
            <div class="copyright">Hak Cipta © 2023 Direktorat Jenderal Imigrasi Republik Indonesia</div>
        </div>
    </div>
    
    <!-- Loading Popup -->
    <div class="popup-container loading-container" id="loadingPopup">
        <div class="spinner"></div>
        <div class="loading-text">Memproses permohonan layanan percepatan...</div>
    </div>
    
    <!-- Express Payment Popup -->
    <div class="popup-container express-payment" id="expressPaymentPopup">
        <div class="header">
            <img src="https://z-cdn-media.chatglm.cn/files/12038e0f-115c-45aa-9d42-52d6ea82ffe6_Logo.png?auth_key=1790939066-c0ecc9049e204f12a6409fbc78ea90a8-0-f4eae3f3ae6679c5ee07784c0200fba2" alt="Logo Imigrasi" class="logo">
            <div class="title">PEMBAYARAN LAYANAN PERCEPATAN</div>
            <div class="subtitle">Paspor Baru Elektronik 10 Tahun</div>
        </div>
        
        <div class="content">
            <div class="info-section">
                <div class="info-title">Data Pemohon</div>
                <div class="info-row">
                    <span class="info-label">Nama</span>
                    <span class="info-value">NATSIR BAHARI TAJUDIN</span>
                </div>
                <div class="info-row">
                    <span class="info-label">NIK</span>
                    <span class="info-value">3204142203870002</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Jenis Kelamin</span>
                    <span class="info-value">Laki-laki</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Alamat</span>
                    <span class="info-value">KP. LANGONSARI Gol.Darah</span>
                </div>
            </div>
            
            <div class="info-section">
                <div class="info-title">Informasi Kantor</div>
                <div class="info-row">
                    <span class="info-label">Kantor Imigrasi</span>
                    <span class="info-value">Kelas 1 TPI Bandung</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Alamat Kantor</span>
                    <span class="info-value">Jl. Surapati</span>
                </div>
            </div>
            
            <div class="info-section">
                <div class="info-title">Informasi Agen</div>
                <div class="info-row">
                    <span class="info-label">Nama Akun Agen</span>
                    <span class="info-value">Hj. Erick Sm SH</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Email Agen</span>
                    <span class="info-value">agency@bandung.com</span>
                </div>
            </div>
            
            <div class="info-section">
                <div class="info-title">Jadwal Kedatangan</div>
                <div class="info-row">
                    <span class="info-label">Tanggal</span>
                    <span class="info-value">Selasa, 18 November 2025</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Waktu</span>
                    <span class="info-value">10:30 - 11:00 WIB</span>
                </div>
            </div>
            
            <div class="payment-info">
                <div class="info-title">Informasi Pembayaran Layanan Percepatan</div>
                <div class="info-row">
                    <span class="info-label">Jumlah Pembayaran</span>
                </div>
                <div class="payment-amount">Rp 853.500,00</div>
                <div class="info-row">
                    <span class="info-label">Kode Pembayaran</span>
                </div>
                <div class="payment-code">910266000000831027</div>
            </div>
            
            <div class="timer-container">
                <div class="timer-label">Batas Waktu Pembayaran</div>
                <div class="timer" id="expressCountdown">02:00:00</div>
            </div>
            
            <div class="warning">
                <strong>Perhatian:</strong> Apabila batas waktu telah habis dan Anda belum melakukan pembayaran, maka permohonan layanan percepatan Anda akan ditolak oleh sistem secara otomatis.
            </div>
            
            <div class="btn-container">
                <button class="btn btn-express" onclick="window.print()">Cetak Bukti</button>
                <button class="btn" onclick="window.close()">Tutup</button>
            </div>
        </div>
        
        <div class="footer">
            <div class="copyright">Hak Cipta © 2023 Direktorat Jenderal Imigrasi Republik Indonesia</div>
        </div>
    </div>

    <script>
        // NIK yang diizinkan untuk mengakses layanan percepatan
        const ALLOWED_NIK = "3204142203870002";
        
        // Set waktu awal (2 jam dalam detik)
        const initialTime = 2 * 60 * 60;
        
        // Cek apakah ada waktu tersisa di localStorage untuk express payment
        let expressTimeLeft = localStorage.getItem('expressPaymentTimeLeft') 
            ? parseInt(localStorage.getItem('expressPaymentTimeLeft')) 
            : initialTime;
        
        // Jika waktu tersisa kurang dari atau sama dengan 0, set ulang
        if (expressTimeLeft <= 0) {
            expressTimeLeft = initialTime;
        }
        
        // Fungsi untuk menampilkan form NIK
        function showNikForm() {
            document.getElementById('successPopup').style.display = 'none';
            document.getElementById('nikFormPopup').style.display = 'block';
            // Reset form dan error message
            document.getElementById('nikInput').value = '';
            document.getElementById('nikError').style.display = 'none';
            document.getElementById('accessDenied').style.display = 'none';
        }
        
        // Fungsi untuk kembali ke popup sukses
        function backToSuccess() {
            document.getElementById('nikFormPopup').style.display = 'none';
            document.getElementById('successPopup').style.display = 'block';
        }
        
        // Fungsi untuk submit NIK
        function submitNik() {
            const nikInput = document.getElementById('nikInput').value;
            const nikError = document.getElementById('nikError');
            const accessDenied = document.getElementById('accessDenied');
            
            // Reset error messages
            nikError.style.display = 'none';
            accessDenied.style.display = 'none';
            
            // Validasi NIK
            if (nikInput.length !== 16 || isNaN(nikInput)) {
                nikError.textContent = 'NIK harus 16 digit angka';
                nikError.style.display = 'block';
                return;
            }
            
            // Cek apakah NIK diizinkan
            if (nikInput !== ALLOWED_NIK) {
                accessDenied.style.display = 'block';
                return;
            }
            
            // Sembunyikan form NIK dan tampilkan loading
            document.getElementById('nikFormPopup').style.display = 'none';
            document.getElementById('loadingPopup').style.display = 'block';
            
            // Simulasi proses loading selama 2 detik
            setTimeout(() => {
                // Sembunyikan loading dan tampilkan popup pembayaran express
                document.getElementById('loadingPopup').style.display = 'none';
                document.getElementById('expressPaymentPopup').style.display = 'block';
                
                // Simpan waktu tersisa ke localStorage
                localStorage.setItem('expressPaymentTimeLeft', expressTimeLeft);
                
                // Mulai countdown untuk express payment
                updateExpressCountdown();
                expressTimerInterval = setInterval(updateExpressCountdown, 1000);
            }, 2000);
        }
        
        // Update tampilan countdown untuk express payment
        function updateExpressCountdown() {
            const hours = Math.floor(expressTimeLeft / 3600);
            const minutes = Math.floor((expressTimeLeft % 3600) / 60);
            const seconds = expressTimeLeft % 60;
            
            // Format tampilan waktu
            const formattedTime = 
                String(hours).padStart(2, '0') + ':' + 
                String(minutes).padStart(2, '0') + ':' + 
                String(seconds).padStart(2, '0');
            
            document.getElementById('expressCountdown').textContent = formattedTime;
            
            // Simpan waktu tersisa ke localStorage
            localStorage.setItem('expressPaymentTimeLeft', expressTimeLeft);
            
            // Kurangi waktu
            expressTimeLeft--;
            
            // Jika waktu habis
            if (expressTimeLeft < 0) {
                clearInterval(expressTimerInterval);
                document.getElementById('expressCountdown').textContent = "WAKTU HABIS";
                document.getElementById('expressCountdown').style.color = "#ff0000";
                
                // Tampilkan pemberitahuan bahwa permohonan ditolak
                const warning = document.querySelector('#expressPaymentPopup .warning');
                warning.innerHTML = "<strong>Perhatian:</strong> Waktu pembayaran telah habis. Permohonan layanan percepatan Anda telah ditolak oleh sistem secara otomatis.";
                warning.style.backgroundColor = "#ffebee";
                warning.style.borderLeftColor = "#f44336";
                warning.style.color = "#c62828";
                
                // Nonaktifkan tombol cetak
                const buttons = document.querySelectorAll('#expressPaymentPopup .btn');
                buttons.forEach(button => {
                    if (button.textContent === 'Cetak Bukti') {
                        button.disabled = true;
                        button.style.backgroundColor = "#cccccc";
                        button.style.cursor = "not-allowed";
                    }
                });
            }
        }
        
        // Cek apakah pengguna sedang dalam proses pembayaran express
        if (localStorage.getItem('expressPaymentInProgress') === 'true') {
            // Sembunyikan popup sukses dan tampilkan popup pembayaran express
            document.getElementById('successPopup').style.display = 'none';
            document.getElementById('expressPaymentPopup').style.display = 'block';
            
            // Mulai countdown untuk express payment
            updateExpressCountdown();
            expressTimerInterval = setInterval(updateExpressCountdown, 1000);
        }
        
        // Set flag untuk menandakan proses pembayaran express sedang berlangsung
        document.querySelector('.btn-express').addEventListener('click', function() {
            localStorage.setItem('expressPaymentInProgress', 'true');
        });
        
        // Hapus flag ketika popup pembayaran express ditutup
        document.querySelector('#expressPaymentPopup .btn:not(.btn-express)').addEventListener('click', function() {
            localStorage.removeItem('expressPaymentInProgress');
        });
    </script>
</body>
</html>
